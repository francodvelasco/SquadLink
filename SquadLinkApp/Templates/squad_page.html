{% extends 'base.html' %}

{% block title %}Squad: {{ lobby.squad_name }}{% endblock %}

{% load static %}
{% block content %}

<div id="regbg"></div>
<div id="squadpage">
    <div id="squadbox">
        <div id="squadheader">
            <div id="squadtitle">
                <div id="icon">
                    <img src="{{ lobby.photo.url }}" alt="Image of {{ lobby.squad_name }}" width="192" height="192">
                </div>
                <h1>{{ lobby.squad_name }}</h1>
            </div>

            {% if user == lobby.creator.user %}
            <div id="squadbuttons">
                <a href="{% url 'SquadLobby:lobby-edit' pk=lobby.pk %}">
                    <div id="customize"><svg width="21" height="22" viewBox="0 0 21 22" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.9479 2.70312L18.2162 7.20854L7.11863 18.9226H2.85034V14.4172L13.9479 2.70312Z"
                                stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        Join Requests</div>
                </a>
                <div id="settings"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_3135_796)">
                            <path
                                d="M11.7334 14.9463C13.3534 14.9463 14.6667 13.633 14.6667 12.0129C14.6667 10.3929 13.3534 9.07959 11.7334 9.07959C10.1133 9.07959 8.80005 10.3929 8.80005 12.0129C8.80005 13.633 10.1133 14.9463 11.7334 14.9463Z"
                                stroke="#EEEEEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                                d="M18.9689 14.9462C18.8387 15.2411 18.7999 15.5683 18.8574 15.8855C18.9149 16.2026 19.0661 16.4953 19.2916 16.7258L19.3502 16.7844C19.532 16.9661 19.6763 17.1817 19.7747 17.4191C19.8731 17.6565 19.9238 17.911 19.9238 18.168C19.9238 18.425 19.8731 18.6795 19.7747 18.9169C19.6763 19.1543 19.532 19.3699 19.3502 19.5515C19.1686 19.7334 18.9529 19.8776 18.7155 19.976C18.4781 20.0744 18.2237 20.1251 17.9667 20.1251C17.7097 20.1251 17.4552 20.0744 17.2178 19.976C16.9804 19.8776 16.7647 19.7334 16.5831 19.5515L16.5244 19.4929C16.294 19.2675 16.0013 19.1163 15.6841 19.0587C15.3669 19.0012 15.0398 19.0401 14.7449 19.1702C14.4557 19.2942 14.2091 19.5 14.0353 19.7623C13.8616 20.0246 13.7684 20.332 13.7671 20.6467V20.8129C13.7671 21.3315 13.5611 21.8289 13.1943 22.1957C12.8276 22.5624 12.3302 22.7684 11.8116 22.7684C11.2929 22.7684 10.7955 22.5624 10.4288 22.1957C10.062 21.8289 9.856 21.3315 9.856 20.8129V20.7249C9.84843 20.4012 9.74368 20.0874 9.55535 19.8241C9.36702 19.5607 9.10383 19.3602 8.8 19.2484C8.50509 19.1183 8.17795 19.0795 7.86076 19.137C7.54358 19.1945 7.25089 19.3457 7.02045 19.5711L6.96178 19.6298C6.78016 19.8116 6.56449 19.9558 6.32709 20.0542C6.08969 20.1527 5.83522 20.2033 5.57823 20.2033C5.32124 20.2033 5.06677 20.1527 4.82937 20.0542C4.59197 19.9558 4.37629 19.8116 4.19467 19.6298C4.01285 19.4482 3.86861 19.2325 3.7702 18.9951C3.67179 18.7577 3.62113 18.5032 3.62113 18.2462C3.62113 17.9892 3.67179 17.7348 3.7702 17.4974C3.86861 17.26 4.01285 17.0443 4.19467 16.8627L4.25334 16.804C4.47875 16.5735 4.62996 16.2809 4.68748 15.9637C4.74499 15.6465 4.70616 15.3193 4.57601 15.0244C4.45206 14.7352 4.24625 14.4886 3.98393 14.3149C3.7216 14.1411 3.4142 14.0479 3.09956 14.0467H2.93334C2.41469 14.0467 1.91729 13.8406 1.55055 13.4739C1.18381 13.1071 0.977783 12.6097 0.977783 12.0911C0.977783 11.5725 1.18381 11.0751 1.55055 10.7083C1.91729 10.3416 2.41469 10.1355 2.93334 10.1355H3.02134C3.34498 10.128 3.65885 10.0232 3.92216 9.83489C4.18547 9.64656 4.38604 9.38338 4.49778 9.07955C4.62794 8.78463 4.66677 8.45749 4.60925 8.1403C4.55174 7.82312 4.40053 7.53043 4.17512 7.29999L4.11645 7.24132C3.93463 7.05971 3.79039 6.84403 3.69198 6.60663C3.59357 6.36923 3.54291 6.11476 3.54291 5.85777C3.54291 5.60078 3.59357 5.34631 3.69198 5.10891C3.79039 4.87151 3.93463 4.65583 4.11645 4.47421C4.29807 4.29239 4.51374 4.14815 4.75114 4.04974C4.98854 3.95133 5.24301 3.90067 5.50001 3.90067C5.757 3.90067 6.01147 3.95133 6.24887 4.04974C6.48627 4.14815 6.70194 4.29239 6.88356 4.47421L6.94223 4.53288C7.17267 4.75829 7.46535 4.90951 7.78254 4.96702C8.09973 5.02453 8.42687 4.9857 8.72178 4.85555H8.8C9.0892 4.7316 9.33584 4.5258 9.50957 4.26347C9.6833 4.00114 9.77653 3.69374 9.77778 3.3791V3.21288C9.77778 2.69423 9.98381 2.19683 10.3506 1.83009C10.7173 1.46336 11.2147 1.25732 11.7333 1.25732C12.252 1.25732 12.7494 1.46336 13.1161 1.83009C13.4829 2.19683 13.6889 2.69423 13.6889 3.21288V3.30088C13.6901 3.61552 13.7834 3.92292 13.9571 4.18525C14.1308 4.44757 14.3775 4.65338 14.6667 4.77732C14.9616 4.90748 15.2887 4.94631 15.6059 4.8888C15.9231 4.83128 16.2158 4.68007 16.4462 4.45466L16.5049 4.39599C16.6865 4.21417 16.9022 4.06993 17.1396 3.97152C17.377 3.87311 17.6315 3.82245 17.8884 3.82245C18.1454 3.82245 18.3999 3.87311 18.6373 3.97152C18.8747 4.06993 19.0904 4.21417 19.272 4.39599C19.4538 4.57761 19.5981 4.79328 19.6965 5.03069C19.7949 5.26809 19.8455 5.52256 19.8455 5.77955C19.8455 6.03654 19.7949 6.29101 19.6965 6.52841C19.5981 6.76581 19.4538 6.98148 19.272 7.1631L19.2133 7.22177C18.9879 7.45221 18.8367 7.74489 18.7792 8.06208C18.7217 8.37927 18.7605 8.70641 18.8907 9.00132V9.07955C19.0146 9.36874 19.2204 9.61538 19.4827 9.78911C19.7451 9.96284 20.0525 10.0561 20.3671 10.0573H20.5333C21.052 10.0573 21.5494 10.2634 21.9161 10.6301C22.2829 10.9968 22.4889 11.4942 22.4889 12.0129C22.4889 12.5315 22.2829 13.0289 21.9161 13.3957C21.5494 13.7624 21.052 13.9684 20.5333 13.9684H20.4453C20.1307 13.9697 19.8233 14.0629 19.561 14.2366C19.2986 14.4104 19.0928 14.657 18.9689 14.9462V14.9462Z"
                                stroke="#EEEEEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </g>
                        <defs>
                            <clipPath id="clip0_3135_796">
                                <rect y="0.279785" width="23.4667" height="23.4667" rx="10" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>
                    Settings
                </div>
            </div>
            {% endif %}
        </div>
        <div id="squadcontent">
            <div id="members">
                <h2>Members:</h2>

                <div id="memberlist">

                    <div class="member">
                        <div class="photo">
                            <a href="{% url 'UserProfile:view-external-profile' username=lobby.creator.user.username%}">
                                <img src="{{ lobby.creator.profile_image.url }}"
                                    alt="Profile picture of {{lobby.creator.user.username}}" height="100px">
                            </a>
                        </div>
                        <div class="username">
                            <a
                                href="{% url 'UserProfile:view-external-profile' username=lobby.creator.user.username%}">{{lobby.creator.user.username}}</a>
                        </div>

                        {% if user != lobby.creator.user %}
                        <div class="settings">
                            <svg width="17" height="19" viewBox="0 0 17 19" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M8.50008 10.3867C8.89128 10.3867 9.20841 10.0509 9.20841 9.63672C9.20841 9.22251 8.89128 8.88672 8.50008 8.88672C8.10888 8.88672 7.79175 9.22251 7.79175 9.63672C7.79175 10.0509 8.10888 10.3867 8.50008 10.3867Z"
                                    stroke="#EEEEEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path
                                    d="M13.4583 10.3867C13.8495 10.3867 14.1667 10.0509 14.1667 9.63672C14.1667 9.22251 13.8495 8.88672 13.4583 8.88672C13.0671 8.88672 12.75 9.22251 12.75 9.63672C12.75 10.0509 13.0671 10.3867 13.4583 10.3867Z"
                                    stroke="#EEEEEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path
                                    d="M3.54159 10.3867C3.93279 10.3867 4.24992 10.0509 4.24992 9.63672C4.24992 9.22251 3.93279 8.88672 3.54159 8.88672C3.15038 8.88672 2.83325 9.22251 2.83325 9.63672C2.83325 10.0509 3.15038 10.3867 3.54159 10.3867Z"
                                    stroke="#EEEEEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>

                        <a class="addfriend"
                            href="{% url 'UserProfile:add-friend' sender=user_add.id receiver=lobby.creator.id %}">Add
                        </a>
                        {% endif %}
                    </div>

                    {% for member in lobby.squad_members.all %}
                    <div class="member">
                        <div class="photo">
                            <a href="{% url 'UserProfile:view-external-profile' username=member.user.username%}">
                                <img src="{{ member.profile_image.url }}"
                                    alt="Profile picture of {{member.user.username}}" height="100px">
                            </a>
                        </div>
                        <div class="username">
                            <a
                                href="{% url 'UserProfile:view-external-profile' username=member.user.username%}">{{member.user.username}}<span></span></a>
                        </div>

                        {% if user != member.user %}
                        <div class="settings">
                            <svg width="17" height="19" viewBox="0 0 17 19" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M8.50008 10.3867C8.89128 10.3867 9.20841 10.0509 9.20841 9.63672C9.20841 9.22251 8.89128 8.88672 8.50008 8.88672C8.10888 8.88672 7.79175 9.22251 7.79175 9.63672C7.79175 10.0509 8.10888 10.3867 8.50008 10.3867Z"
                                    stroke="#EEEEEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path
                                    d="M13.4583 10.3867C13.8495 10.3867 14.1667 10.0509 14.1667 9.63672C14.1667 9.22251 13.8495 8.88672 13.4583 8.88672C13.0671 8.88672 12.75 9.22251 12.75 9.63672C12.75 10.0509 13.0671 10.3867 13.4583 10.3867Z"
                                    stroke="#EEEEEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path
                                    d="M3.54159 10.3867C3.93279 10.3867 4.24992 10.0509 4.24992 9.63672C4.24992 9.22251 3.93279 8.88672 3.54159 8.88672C3.15038 8.88672 2.83325 9.22251 2.83325 9.63672C2.83325 10.0509 3.15038 10.3867 3.54159 10.3867Z"
                                    stroke="#EEEEEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <a class="addfriend"
                            href="{% url 'UserProfile:add-friend' sender=user_add.id receiver=member.id %}">Add</a>
                        {% endif %}

                    </div>
                    {% endfor %}


                </div>

                {% if user == lobby.creator.user %}
                <form method="post" enctype="multipart/form-data">
                    <div id="invitebar">
                        {% csrf_token %}

                        {{ form.username.errors }}
                        {{ form.username }}
                        <button type="submit" id="invitebutton">
                            Invite
                        </button>
                    </div>
                </form>
                {% endif %}
            </div>
            <div id="squaddetails">
                <h2>Game: {{ lobby.game }}</h2>

                {% if lobby.game == "Valorant" %}
                <img id="banner" src={% static 'assets\valorantcard.jpg' %} alt="Valorant Card">
                {% elif lobby.game == "Apex Legends" %}
                <img id="banner" src={% static 'assets\apexcard.jpg' %} alt="Valorant Card">
                {% elif lobby.game == "DOTA 2" %}
                <img id="banner" src={% static 'assets\dota2card.jpg' %} alt="Valorant Card">
                {% elif lobby.game == "League of Legends" %}
                <img id="banner" src={% static 'assets\lolcard.jpg' %} alt="Valorant Card">
                {% elif lobby.game == "Mobile Legends" %}
                <img id="banner" src={% static 'assets\mlcard.jpg' %} alt="Valorant Card">
                {% elif lobby.game == "Pokémon Unite" %}
                <img id="banner" src={% static 'assets\pokemonunitecard.jpg' %} alt="Valorant Card">
                {% elif lobby.game == "Counter-Strike: Global Offensive (CS:GO)" %}
                <img id="banner" src={% static 'assets\csgocard.jpg' %} alt="Valorant Card">
                {% elif lobby.game == "World of Warcraft" %}
                <img id="banner" src={% static 'assets\wowcard.jpg' %} alt="Valorant Card">
                {% endif %}

                <div id="specificdetails">
                    <p>Rank: {{ lobby.rank_lower_bound }} - {{ lobby.rank_higher_bound }}</p>
                    <p>Region: {{ lobby.region }}</p>
                    <p>Platforms: {{ lobby.platforms }}</p>
                    <p>Languages: {{ lobby.languages }}</p>
                    <p>Lobby Size: {{ lobby.squad_members.all|length|add:"1" }}/{{ lobby.squad_size }}</p>
                </div>
                <div id="description">
                    <h3>Description</h3>
                    <p>{{ lobby.description }}</p>
                </div>
            </div>

        </div>
        <div clear="both"></div>
        <div id="readygroup">

            {% if user == lobby.creator.user %}
            <button id="readybutton">Ready!
            </button>
            <p>*Clicking ready will notify all members</p>

            {% elif is_member %}

            <button id="leavebutton" type="submit">Temp Leave Squad
            </button>

            {% elif max_capacity_reached %}

            <button id="leavebutton" type="submit" style="background-color:gray">Squad Full
            </button>

            {% else %}

            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <button id="readybutton" type="submit">Join Squad
                </button>
            </form>

            {% endif %}

        </div>
    </div>
    <!-- <div id="chatbox">
            <div id="chatheader">
                <h2>Chat</h2>
                <div id="membericons">
                    <div class="membericon">img</div>
                    <div class="membericon">img</div>
                    <div class="membericon">img</div>
                    <div class="membericon">img</div>
                </div>
            </div>
            <div id="chatlog">
                <p class="time">Oct 1 11:39</p>
                <div class="chatbubbleme">
                    <div class="chatmessage"> What time do you guys usually play?</div>
                    <div class="icon">img</div>
                </div>
                <div class="chatbubbleother">
                    <div class="icon">img</div>
                    <div class="chatmessage"> I have class right now.</div>
                </div>
                <p class="time">Oct 1 17:12</p>

                <div class="chatbubbleme">
                    <div class="chatmessage"> What time do you guys usually play?</div>
                    <div class="icon">img</div>
                </div>
                <div class="chatbubbleother">
                    <div class="icon">img</div>
                    <div class="chatmessage"> I have class right now.</div>
                </div>
            </div>
            <div id="typebox">
                <div id="typeinput"> Type your message...</div>
                <div id="chaticon"><svg width="25" height="22" viewBox="0 0 25 22" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M21.878 20.7946C19.5835 19.9415 20.4437 17.2115 22.2349 15.543C23.8967 13.9952 24.8911 12.0289 24.8911 9.88886C24.8911 4.89932 19.4859 0.854492 12.8183 0.854492C6.15075 0.854492 0.745605 4.89932 0.745605 9.88886C0.745605 14.8784 6.15075 18.9232 12.8183 18.9232C13.1023 18.9232 13.374 19.0342 13.5883 19.2205C15.5725 20.9452 18.8471 21.6644 21.8749 20.8409C21.9027 20.8333 21.9046 20.8045 21.878 20.7946Z"
                            fill="white" fill-opacity="0.55" />
                    </svg>
                </div>
            </div>
        </div> -->
</div>

<!-- <div id="squadbg">
        <div id="squadbanner"></div>
        <div id="bannerlabel">Test Squad</div>
        <div id="joinrequests">Join Requests</div>
        <div id="squadsettings">Settings</div>
        <div id="squadmembers">Members:<br>Test#123<br>Test#1234</div>
        <div id="invitemembers">Invite Members</div>
        <div id="squadgamedetails">
            Game:<br>
            Rank Range:<br>
            Region:<br>
            Platform:<br>
        </div>
        <div id="chatbg">
            <div id="chatbanner">
                <div id="bannerlabel">Chat</div>
            </div>
        </div>
    </div> -->

{% endblock %}